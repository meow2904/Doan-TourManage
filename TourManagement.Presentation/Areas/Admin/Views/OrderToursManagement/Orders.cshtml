@{
    ViewBag.Title = "Orders";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div id="orderPending" class="col-6">

    </div>
    <div id="orderConfirmed" class="col-5">
    
    </div>
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Detail</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="infor">
                    
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script type="text/javascript">
        function getData() {

            const url = '@Url.Action("GetOrders", "OrderToursManagement")'
            $('#orderPending').load(url+'?status=Pending')
            $('#orderConfirmed').load(url+'?status=Confirmed')
        }
        getData()

        $('#orderPending').on('click', '.btnInforModal', function () {
            const orderid = $(this).data('id')
            var url = '@Url.Action("GetInfor", "OrderToursManagement")'
            url += '?orderTourId=' + orderid
            $('#infor').load(url);
        })

        $('#orderPending').on('click', '.btnConfirm', function () {
            const orderid = $(this).data('id')
            var url = '@Url.Action("UpdateOrders", "OrderToursManagement")'
            url += '?orderTourId=' + orderid+'&status='+'Confirmed'
            $('#orderPending').load(url);
            getData();
        })

        $('#orderPending').on('click', '.btnDelete', function () {
            const orderid = $(this).data('id')
            var url = '@Url.Action("UpdateOrders", "OrderToursManagement")'
            url += '?orderTourId=' + orderid+'&status='+'Cancel'
            $('#orderPending').load(url);
            getData();
        })

    </script>
    
}